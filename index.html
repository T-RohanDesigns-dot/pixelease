<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>PixelEase – Image Enhancer</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
body{
  font-family: Arial, sans-serif;
  background:#f4f8f6;
  margin:0;
  text-align:center;
}
h1{color:#2f7d6b;margin-top:20px}
.container{
  max-width:1000px;
  margin:30px auto;
  display:flex;
  gap:30px;
  justify-content:center;
  align-items:flex-start;
}
.canvas-box{
  background:#fff;
  padding:20px;
  border-radius:12px;
  box-shadow:0 10px 25px rgba(0,0,0,.1);
}
canvas{
  max-width:100%;
  border-radius:10px;
}
.controls{
  background:#fff;
  padding:20px;
  border-radius:12px;
  width:260px;
  box-shadow:0 10px 25px rgba(0,0,0,.1);
}
.controls label{font-size:14px}
.controls input,
.controls button,
.controls select{
  width:100%;
  margin:8px 0;
}
button{
  background:#2f7d6b;
  color:#fff;
  border:none;
  padding:10px;
  border-radius:6px;
  cursor:pointer;
}
button:hover{opacity:.9}
footer{
  background:#2f7d6b;
  color:#fff;
  padding:15px;
  margin-top:40px;
}
</style>
</head>

<body>

<h1>PixelEase</h1>
<p>Enhance images instantly. 100% browser-based.</p>
<input type="file" id="upload" accept="image/*">

<div class="container">
  <div class="canvas-box">
    <canvas id="canvas"></canvas>
  </div>

  <div class="controls">
    <label>Brightness</label>
    <input type="range" id="brightness" min="-100" max="100" value="0">

    <label>Contrast</label>
    <input type="range" id="contrast" min="-100" max="100" value="0">

    <button id="sharpen">Sharpen (Kernel)</button>
    <button id="noise">Noise Reduction</button>

    <select id="scale">
      <option value="1">Original</option>
      <option value="2">HD (2×)</option>
      <option value="4">UHD (4×)</option>
    </select>

    <button id="reset">Reset</button>
    <button id="download">Download</button>
  </div>
</div>

<footer>
© 2026 ROHAN.T PVT LTD. All rights reserved.<br>
Design & Developed by Rohan Gupta
</footer>

<script>
const canvas = document.getElementById("canvas");
const ctx = canvas.getContext("2d");
let img = new Image();
let originalData;

document.getElementById("upload").onchange = e => {
  const file = e.target.files[0];
  if(!file) return;
  const reader = new FileReader();
  reader.onload = () => {
    img.onload = () => {
      canvas.width = img.width;
      canvas.height = img.height;
      ctx.drawImage(img,0,0);
      originalData = ctx.getImageData(0,0,canvas.width,canvas.height);
    };
    img.src = reader.result;
  };
  reader.readAsDataURL(file);
};

function applyFilters(){
  const b = +brightness.value;
  const c = +contrast.value;
  let data = ctx.getImageData(0,0,canvas.width,canvas.height);
  let d = data.data;
  const factor = (259*(c+255))/(255*(259-c));
  for(let i=0;i<d.length;i+=4){
    d[i]   = factor*(d[i]-128)+128 + b;
    d[i+1] = factor*(d[i+1]-128)+128 + b;
    d[i+2] = factor*(d[i+2]-128)+128 + b;
  }
  ctx.putImageData(data,0,0);
}

brightness.oninput = contrast.oninput = () => {
  ctx.putImageData(originalData,0,0);
  applyFilters();
};

document.getElementById("sharpen").onclick = () => {
  const w = canvas.width;
  const h = canvas.height;
  let src = ctx.getImageData(0,0,w,h);
  let dst = ctx.createImageData(w,h);
  const k = [0,-1,0,-1,5,-1,0,-1,0];
  for(let y=1;y<h-1;y++){
    for(let x=1;x<w-1;x++){
      for(let c=0;c<3;c++){
        let i = (y*w+x)*4+c;
        let sum=0,ki=0;
        for(let ky=-1;ky<=1;ky++)
          for(let kx=-1;kx<=1;kx++)
            sum += src.data[((y+ky)*w+(x+kx))*4+c]*k[ki++];
        dst.data[i]=Math.min(255,Math.max(0,sum));
      }
      dst.data[(y*w+x)*4+3]=255;
    }
  }
  ctx.putImageData(dst,0,0);
};

document.getElementById("noise").onclick = () => {
  let data = ctx.getImageData(0,0,canvas.width,canvas.height);
  let d = data.data;
  for(let i=0;i<d.length;i+=4){
    let avg=(d[i]+d[i+1]+d[i+2])/3;
    d[i]=d[i]*0.8+avg*0.2;
    d[i+1]=d[i+1]*0.8+avg*0.2;
    d[i+2]=d[i+2]*0.8+avg*0.2;
  }
  ctx.putImageData(data,0,0);
};

document.getElementById("scale").onchange = e => {
  const s = +e.target.value;
  if(s===1){ctx.putImageData(originalData,0,0);return;}
  let tmp = document.createElement("canvas");
  tmp.width = canvas.width*s;
  tmp.height = canvas.height*s;
  tmp.getContext("2d").drawImage(canvas,0,0,tmp.width,tmp.height);
  canvas.width=tmp.width;
  canvas.height=tmp.height;
  ctx.drawImage(tmp,0,0);
};

document.getElementById("reset").onclick = () => {
  canvas.width = img.width;
  canvas.height = img.height;
  ctx.putImageData(originalData,0,0);
  brightness.value=0;
  contrast.value=0;
};

document.getElementById("download").onclick = () => {
  const a=document.createElement("a");
  a.download="pixelease.png";
  a.href=canvas.toDataURL();
  a.click();
};
</script>

</body>
</html>
